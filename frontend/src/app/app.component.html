<style>
  .table-container {
    width: 100%;
    overflow-x: hidden;
    margin-top: 20px;
  }

  .custom-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
  }

  .custom-table th,
  .custom-table td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: center;
  }

  .custom-table th {
    background-color: #333;
    color: #fff;
  }

  .column-scroll {
    overflow-x: auto;
  }
  .column-scroll-container {
    max-width: 100%;
    overflow-x: auto;
    white-space: nowrap;
  }

  .column-scroll::-webkit-scrollbar {
    display: none;
  }

  .column-items {
    white-space: nowrap;
    display: inline-flex;
    justify-content: center;
    align-items: center;
  }

  .column-items span {
    margin-right: 12px;
  }

  .column-chip {
    display: inline-block;
    margin-right: 10px;
    padding: 5px 10px;
    border-radius: 4px;
  }

  .column-chip input[type="checkbox"] {
    margin-left: 6px;
  }

  .actions {
    display: flex;
    justify-content: center;
    gap: 10px;
  }

  .edit-btn {
    background-color: #007bff;
  }

  .save-btn {
    background-color: #28a745;
  }

  .submit-wrapper {
    margin-top: 20px;
    text-align: center;
  }

  .submit-wrapper button {
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 6px;
    font-weight: bold;
    cursor: pointer;
  }

  .w-1_6 {
    width: 10%;
  }
  .w-1_2 {
    width: 70%;
  }

  .center {
    text-align: center;
    text-decoration: underline;
  }

  .dropdown-class {
    display: flex;
    gap: 12px;
    align-items: center;
  }

  .input-class {
    height: 16px;
    width: 16px;
  }

  .spanDiv{
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
  }
</style>

<main>
  <h1 class="center">Custom Report Builder</h1>

  <div class="dropdown-class">
    <h3 class="center">Select Role:</h3>
    <p-autocomplete
      [(ngModel)]="roleValue"
      field="name"
      [dropdown]="true"
      [suggestions]="filteredRoles"
      (completeMethod)="search($event)"
      (change)="onRoleChange()"
    />
  </div>
12{{products}}
  <div *ngIf="roleValue.id" class="table-container">
    <table class="custom-table">
      <thead>
        <tr>
          <th class="w-1_6">Sr No.</th>
          <th class="w-1_6">Report Name</th>
          <th class="w-1_2">Columns</th>
          <th class="w-1_6">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products">
          <td>{{ product.id }}</td>
          <td>{{ product.name }}</td>
          <td>
            <div class="column-scroll">
              <div class="column-items">
                <span class="spanDiv" *ngFor="let item of product.selectedColumns">
                  <!-- <div *ngFor="let report of reports"> -->
                    <!-- <h3>{{ report.name }} ({{ report.reportId }})</h3> -->
                    <ul>
                      <li *ngFor="let col of product.selectedColumns">
                        <input type="checkbox" [checked]="col.is_selected" disabled /> {{ col.column }}
                      </li>
                    </ul>
                  <!-- </div> -->
                  <!-- {{ item.column }}
                  <input
                    class="input-class"
                    type="checkbox"
                    [(ngModel)]="item.is_selected"
                    [disabled]="product.readonly"
                  /> -->
                </span>
              </div>
            </div>
          </td>
          <td>
            <div class="actions">
              <p-button
                label="Edit"
                severity="info"
                (click)="edit(product)"
                [disabled]="!product.readonly"
              />
              
              <p-button
                [disabled]="!isAnyColumnSelected(product) || product.readonly"
                (click)="save(product)"
                label="Save"
                severity="success"
              />
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="submit-wrapper">
      <p-button
        [disabled]="!showSubmit"
        severity="info"
        (click)="submit()"
        label="Submit"
      />
    </div>
  </div>
</main>
